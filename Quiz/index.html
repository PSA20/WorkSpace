<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz</title>
    <!-- JQuery -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- Bootstrap tooltips -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.4/umd/popper.min.js"></script>
    <!-- Bootstrap core JavaScript -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <!-- MDB core JavaScript -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/js/mdb.min.js"></script>
    <!-- Bootstrap core CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet">
    <!-- Material Design Bootstrap -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/css/mdb.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-size: 20px;
            font-family: 'Work Sans', sans-serif;
            color: #333;
            font-weight: 300;
            text-align: center;
        }
        
        input.largerCheckbox {
            width: 15px;
            height: 15px;
        }
        
        h1 {
            font-weight: 300;
            margin: 0px;
            padding: 10px;
            font-size: 20px;
            background-color: #444;
            color: #fff;
        }
        
        label {
            border: 1px solid #84c5fe;
            width: 40%;
            margin: auto;
            border-radius: 5px;
            padding: 13px 15px;
            font-size: 17px;
            cursor: pointer;
            transition: all 0.3s ease;
            align-items: center;
            justify-content: space-between;
            display: block;
            margin-bottom: 15px;
            font-size: 14px;
            cursor: pointer
        }
        
        .question {
            background-color: #555;
            font-weight: bold;
            margin: auto;
            width: 50%;
            margin-top: 0px;
            font-size: 30px;
            margin-bottom: 10px;
        }
        
        .answers {
            background-color: #555;
            padding-bottom: 30px;
            width: 100%;
            margin: auto;
            text-align: left;
            display: inline-block;
        }
        
        .answers label {
            background-color: #555;
            display: block;
            margin-bottom: 5px;
            line-height: normal;
        }
        
        button {
            font-family: 'Work Sans', sans-serif;
            font-size: 18px;
            background-color: rgba(144, 24, 138, 1);
            color: #fff;
            border: 0px;
            border-radius: 2px;
            padding-left: 10px;
            padding-right: 10px;
            cursor: pointer;
            margin-bottom: 20px;
            z-index: 1;
        }
        
        button:hover {
            background-color: #b852ec;
            border: 1px solid #b852ec;
        }
        
        header {
            width: 50%;
            margin-left: 25%;
            font-weight: bold;
            background-color: #90188a;
            color: #fff3e1;
        }
        
        .slide {
            background-color: #555;
            position: absolute;
            left: 0px;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.5s;
        }
        
        .active-slide {
            opacity: 1;
            z-index: 1;
        }
        
        .quiz-container {
            background-color: #555;
            color: #ddd;
            border-radius: 10px;
            padding: 20px;
            position: relative;
            height: 200px;
            width: 100%;
        }
        
        label {
            background-color: #b852ec;
            color: white;
        }
        
        div {
            background-color: #333;
        }
        
        #cont {
            position: relative;
            height: 750px;
            margin-top: 0;
            background-color: #333;
        }
        
        #results {
            padding: 25px 25px;
            height: 100%;
        }
        /* @media only screen and (max-width: 600px) {
            #previous,
            #next,
            #submit {
                margin-top: 400px;
                z-index: 3;
            }
            #Btn {
                margin-top: 50%;
            }
        } */
        
        span.cls_002 {
            font-family: Arial, serif;
            font-size: 10.1px;
            color: rgb(0, 0, 0);
            font-weight: bold;
            font-style: normal;
            text-decoration: none
        }
        
        div.cls_002 {
            font-family: Arial, serif;
            font-size: 10.1px;
            color: rgb(0, 0, 0);
            font-weight: bold;
            font-style: normal;
            text-decoration: none
        }
        
        span.cls_003 {
            font-family: Arial, serif;
            font-size: 10.1px;
            color: rgb(0, 0, 0);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }
        
        div.cls_003 {
            font-family: Arial, serif;
            font-size: 10.1px;
            color: rgb(0, 0, 0);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }
        
        span.cls_004 {
            font-family: Arial, serif;
            font-size: 11.1px;
            color: rgb(0, 0, 0);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }
        
        div.cls_004 {
            font-family: Arial, serif;
            font-size: 11.1px;
            color: rgb(0, 0, 0);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }
        
        span.cls_005 {
            font-family: Arial, serif;
            font-size: 9.1px;
            color: rgb(0, 0, 0);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }
        
        div.cls_005 {
            font-family: Arial, serif;
            font-size: 9.1px;
            color: rgb(0, 0, 0);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }
        
        span.cls_006 {
            font-family: Arial, serif;
            font-size: 9.1px;
            color: rgb(64, 63, 64);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }
        
        div.cls_006 {
            font-family: Arial, serif;
            font-size: 9.1px;
            color: rgb(64, 63, 64);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }
        
        span.cls_007 {
            font-family: Arial, serif;
            font-size: 9.1px;
            color: rgb(157, 32, 106);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }
        
        div.cls_007 {
            font-family: Arial, serif;
            font-size: 9.1px;
            color: rgb(157, 32, 106);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }
        
        span.cls_012 {
            font-family: Arial, serif;
            font-size: 9.1px;
            color: rgb(28, 68, 133);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }
        
        div.cls_012 {
            font-family: Arial, serif;
            font-size: 9.1px;
            color: rgb(28, 68, 133);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }
        
        span.cls_011 {
            font-family: Arial, serif;
            font-size: 13.6px;
            color: rgb(64, 63, 64);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }
        
        div.cls_011 {
            font-family: Arial, serif;
            font-size: 13.6px;
            color: rgb(64, 63, 64);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }
        
        span.cls_014 {
            font-family: Arial, serif;
            font-size: 9.1px;
            color: rgb(51, 12, 78);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }
        
        div.cls_014 {
            font-family: Arial, serif;
            font-size: 9.1px;
            color: rgb(51, 12, 78);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }
        
        #Btn {
            z-index: 2;
            width: 100%;
            position: fixed;
            margin-bottom: 20px;
            bottom: 0;
        }
    </style>
</head>

<body>
    <div id="cont">
        <div class="quiz-container">
            <header></header>
            <div id="5op" style="display: none; color: red;">please select 5 options.</div>
            <div id="quiz"></div>
            <div id="results">
                <footer>we are here</footer>
            </div>
            <div id="email" style="display: none;">
                <form action="http://127.0.0.1:5000/submit" method="post">
                    <div class="form-group">
                        <label for="exampleInputEmail1">Email address</label>
                        <input name="email" type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="Enter email">
                        <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>
                    </div>
                    <div class="form-group">
                        <label for="exampleInputEmail2">Email address</label>
                        <input name="name" type="text" class="form-control" id="exampleInputEmail2" aria-describedby="emailHelp" placeholder="Enter your name">
                        <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>
                    </div>
                    <div class="form-group" style="display: none;">
                        <input name="answer" type="text" id="answer">
                    </div>
                    <button type="submit" class="btn btn-primary">Submit</button>
                </form>
            </div>
        </div>
        <div id="Btn">
            <button id="previous">Previous Question</button>
            <button id="next">Next Question</button>
            <button id="submit">Submit Quiz</button>
        </div>
    </div>
    <script>
        (function() {
            // Functions
            function buildQuiz() {
                // variable to store the HTML output
                resultsContainer.style.display = 'none';
                const output = [];

                // for each question...
                myQuestions.forEach(
                    (currentQuestion, questionNumber) => {

                        // variable to store the list of possible answers
                        const answers = [];
                        if (currentQuestion.type == 'multi') {
                            // and for each available answer...
                            for (letter in currentQuestion.answers) {

                                // ...add an HTML radio button
                                answers.push(
                                    `<label style=" margin-top:20px;">
                                <input class="option form-check-input largerCheckbox" type="checkbox" name="question${questionNumber}" value="${letter}">
                                ${currentQuestion.answers[letter]}
                                </label>`
                                );
                            }
                        } else {
                            for (letter in currentQuestion.answers) {

                                // ...add an HTML radio button
                                answers.push(
                                    `<label style="height: 100%; margin-top:20px;">
              <input type="radio" name="question${questionNumber}" value="${letter}">
              ${letter} :
              ${currentQuestion.answers[letter]}
            </label>`
                                );
                            }
                        }

                        // add this question and its answers to the output
                        output.push(
                            `<div class="slide">
            <div class="question"> ${currentQuestion.question} </div>
            <div class="answers"> ${answers.join("")} </div>
          </div>`
                        );
                    }
                );

                // finally combine our output list into one string of HTML and put it on the page
                quizContainer.innerHTML = output.join('');
            }

            function showResults() {

                // gather answer containers from our quiz
                const answerContainers = quizContainer.querySelectorAll('.answers');
                const col = [];
                // keep track of user's answers
                // for each question...
                myQuestions.forEach((currentQuestion, questionNumber) => {

                    // find selected answer
                    const answerContainer = answerContainers[questionNumber];
                    const selector = `input[name=question${questionNumber}]:checked`;
                    // const userAnswer = (answerContainer.querySelector(selector) || {}).value;
                    // console.log(answerContainer.querySelectorAll(selector));
                    // col[currentQuestion.Col] = parseInt(userAnswer);
                    const userAnswers = answerContainer.querySelectorAll(selector);
                    let temp = [];
                    userAnswers.forEach((answer, num) => {
                        temp[num] = answer.value;
                    });
                    col[currentQuestion.Col - 1] = temp;
                });

                document.getElementById('quiz').style.display = 'none';
                document.getElementById('Btn').style.display = 'none';
                resultsContainer.style.display = 'block';
                document.getElementById('cont').height = 0;
                document.getElementById("results").innerHTML = col;
                var res = {
                    1: 0,
                    2: 0,
                    3: 0
                }
                for (var i in col.slice(0, 12)) {
                    res[col[i]]++;
                }
                var max = res[1];
                var ans = 1;
                for (var i in res) {
                    if (max < res[i]) {
                        max = res[i];
                        ans = i;
                    }
                }
                var answer = {
                    1: "vatta",
                    2: "pitta",
                    3: "kapha"
                }
                const mult = col.slice(12);
                console.log(mult);
                const multans = {
                    0: [6, 'E', 'I'],
                    1: [7, 'S', 'I'],
                    2: [6, 'T', 'F'],
                    3: [6, 'J', 't']
                };
                let multAns = '';
                for (var i in mult) {
                    let a = 0;
                    let b = 0;
                    for (var j in mult[i]) {
                        if (multans[i][0] < mult[i][j]) {
                            b++;
                        } else {
                            a++;
                        }
                        console.log(mult[i][j]);
                    }
                    if (a < b) {
                        multAns = multAns + multans[i][2];
                    } else {
                        multAns = multAns + multans[i][1];
                    }
                    console.log(mult[i], multans[i]);
                }
                console.log(multAns);
                console.log(col);
                console.log(res);
                console.log([answer[ans], multAns]);
                document.getElementById('answer').value = [answer[ans], multAns];
                document.getElementById('email').style.display = 'inline-block'
            }

            function showSlide(n) {
                slides[currentSlide].classList.remove('active-slide');
                slides[n].classList.add('active-slide');
                currentSlide = n;
                if (currentSlide === 0) {
                    previousButton.style.display = 'none';
                } else {
                    previousButton.style.display = 'inline-block';
                }
                if (currentSlide === slides.length - 1) {
                    submitButton.style.display = 'inline-block';
                    nextButton.style.display = 'none';
                } else {
                    submitButton.style.display = 'none';
                    nextButton.style.display = 'inline-block';
                }
            }

            function showNextSlide() {
                const answerContainers = quizContainer.querySelectorAll('.answers');
                const answerContainer = answerContainers[currentSlide];
                const selector = `input[name=question${currentSlide}]:checked`;
                const userAnswers = answerContainer.querySelectorAll(selector);
                if (myQuestions[currentSlide].type == 'multi') {
                    if (userAnswers.length == 5) {
                        showSlide(currentSlide + 1);
                    } else {
                        document.getElementById('5op').innerHTML = "please select 5 options.";
                        document.getElementById('5op').style.display = 'block';
                        setTimeout(function() {
                            document.getElementById('5op').style.display = 'none';
                        }, 3000);
                    }
                } else {
                    if (userAnswers.length != 0) {
                        showSlide(currentSlide + 1);
                    } else {
                        document.getElementById('5op').innerHTML = "please select aleast one option.";
                        document.getElementById('5op').style.display = 'block';
                        setTimeout(function() {
                            document.getElementById('5op').style.display = 'none';
                        }, 3000);
                    }
                }
            }

            function showPreviousSlide() {
                showSlide(currentSlide - 1);
            }

            // Variables
            const quizContainer = document.getElementById('quiz');
            const resultsContainer = document.getElementById('results');
            const submitButton = document.getElementById('submit');
            const myQuestions = [{
                question: "Which Most accurately describe your body?",
                answers: {
                    1: "A-Curvy, bigger built",
                    2: "B- Medium built, good muscular built",
                    3: "Naturally thin, lanky, slender",
                },
                Col: 1
            }, {
                question: "How easily do you gain weight?",
                answers: {
                    1: "Too easily",
                    2: "Moderately",
                    3: "Next to impossible",
                },
                Col: 2
            }, {
                question: "What is your hair like",
                answers: {
                    1: "Thick, abundant, more on the oily side",
                    2: "Fine, oily. Tendency towards thinning or greying",
                    3: "Dry frizzy",
                },
                Col: 3
            }, {
                question: "What is your digestion like",
                answers: {
                    1: "Slow, weak",
                    2: "Strong powerful",
                    3: "Variable, sometimes good or my be even bad",
                },
                Col: 4
            }, {
                question: "What is your body detoxification like",
                answers: {
                    1: "Thick long Sluggish",
                    2: "regular towards loose",
                    3: "Tends towards constipation",
                },
                Col: 5
            }, {
                question: "How you feel normally",
                answers: {
                    1: "Heaviness after eating and water retention",
                    2: "Heartburn, acidity",
                    3: "Bloating, gases",
                },
                Col: 6
            }, {
                question: "What is body temperature?",
                answers: {
                    1: "Adaptable, don’t like cold, wet weather",
                    2: "Usually warm, prefer cool",
                    3: "Always cold prefer hot",
                },
                Col: 7
            }, {
                question: "What are your negative traits?",
                answers: {
                    1: "Lonely, depressed and jealous",
                    2: "Competitive and impatient",
                    3: "Anxious, fearful and nervous",
                },
                Col: 8
            }, {
                question: "What is your temperament like/",
                answers: {
                    1: "Easy going, giving, and creative",
                    2: "Driven, passionate and ambitious",
                    3: "Enthusiastic, creative",
                },
                Col: 9
            }, {
                question: "How you sleep",
                answers: {
                    1: "Deep Long",
                    2: "Moderate sound",
                    3: "Difficult falling asleep, wake up often",
                },
                Col: 10
            }, {
                question: "How are your money and material possessions are",
                answers: {
                    1: "Hoarder, have a hard time letting things go",
                    2: "Calculative shopping, spend on luxurious that are worth buying",
                    3: "Impulsive shopper, buy things and forgets",
                },
                Col: 11
            }, {
                question: "What subjects you are most drawn towards?",
                answers: {
                    1: "Counseling, teaching, human resource, care-giving, hand on stuff",
                    2: "Business science, law, engineering, calculated stuff",
                    3: "Arts, spirituality, philosophy, literature, big-picture stuff",
                },
                Col: 12
            }, {
                question: "Which is your most natural energy orientation?",
                answers: {
                    1: "E - Act first, think/reflect later",
                    2: "E - Talk more than they listen",
                    3: "E - Seek being the center of attention",
                    4: "E - Feel deprived when cut off from interaction with the outside world",
                    5: "E - Enjoy wide variety and change in people and Relationships",
                    6: "E - Tend to think out loud",
                    7: "I - Think/reflect first, then Act",
                    8: "I - listen more than they talk",
                    9: "I - Avoid being the center of attention",
                    10: "I - Regularly require an amount of 'private time' to recharge batteries",
                    11: "I - Prefer one-to-one communication and relationships",
                    12: "I - tend to think things through inside their head",
                },
                type: 'multi',
                Col: 13
            }, {
                question: "Which way of perceiving or understanding is most 'automatic' or natural? ",
                answers: {
                    1: "S - Trust what is certain/concrete",
                    2: "S - Like new ideas if they are practical",
                    3: "S - Value common sense and realism",
                    4: "S - Like to hone established skills",
                    5: "S - Tend to be specific and literal and give detailed descriptions",
                    6: "S - Present information in a step-by-step manner",
                    7: "S - Are oriented to the present",
                    8: "I - Trust inspiration",
                    9: "I - Like new ideas for their own sake",
                    10: "I - Value imagination and innovation",
                    11: "I - Like to learn new skills and get bored after mastering skills",
                    12: "I - tend to be general and figurative; use metaphors a lot",
                    13: "I - Present information in a round-about manner",
                    14: "I - Are oriented toward the future"
                },
                type: 'multi',
                Col: 14
            }, {
                question: "Which way of forming judgments and making choices is most natural?",
                answers: {
                    1: "T - Instinctively search for facts and logic in a decision situation",
                    2: "T - Naturally notices tasks and work to be accomplished",
                    3: "T - Easily able to provide an objective and critical analysis",
                    4: "T - Accept conflict as a natural, normal part of relationships with people",
                    5: "T - Value logic, justice, and fairness: one standard for all",
                    6: "T - Are motivated by accomplishment",
                    7: "F - Instinctively employ personal feelings and impact on people in decision situations",
                    8: "F - Naturally sensitive to people’s needs and reactions",
                    9: "F - Naturally seek consensus and popular opinions.",
                    10: "F - Unsettled by conflict; have almost a toxic reaction to disharmony",
                    11: "F - Value empathy and harmony: see the exception to the rule",
                    12: "F - Are motivated by appreciation",
                },
                type: 'multi',
                Col: 15
            }, {
                question: "What is your 'action orientation' towards the outside world and how do you structure your life?",
                answers: {
                    1: "J - Like knowing what they are getting into",
                    2: "J - Focus on task-related action; complete meaningful segments before moving on",
                    3: "J - Work best and avoid stress when able to keep ahead of deadlines",
                    4: "J - Naturally use targets, dates, and standard routines to manage life",
                    5: "J - Are happiest after a decision has been made",
                    6: "J - Are satisfied most from finishing a project",
                    7: "P - Comfortable moving into action without a plan; plan on-the-go",
                    8: "P - Like to multitask, have variety, mix work/play",
                    9: "P - Naturally tolerant of time pressure; work best close to the deadlines",
                    10: "P - Instinctively avoid commitments that interfere with flexibility, freedom, and variety",
                    11: "P - Are happiest leaving options open",
                    12: "P - Are satisfied most from starting a project",
                },
                type: 'multi',
                Col: 16
            }, ];

            // Kick things off
            buildQuiz();

            // Pagination
            const nextButton = document.getElementById("next");
            const previousButton = document.getElementById("previous");
            const slides = document.querySelectorAll(".slide");
            let currentSlide = 0;

            // Show the first slide
            showSlide(currentSlide);

            // Event listeners
            const option = document.getElementsByClassName("option");
            /* for (var i = 0; i < option.length; i++) {
                option[i].addEventListener('change', function() {
                    if (currentSlide == myQuestions.length - 1) {
                        showResults();
                    } else {
                        showNextSlide();
                    }
                });
            } */
            nextButton.addEventListener('click', showNextSlide);
            submitButton.addEventListener('click', showResults);
            previousButton.addEventListener("click", showPreviousSlide);
        })();
    </script>
</body>