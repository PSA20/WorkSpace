<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz</title>
    <!-- JQuery -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- Bootstrap tooltips -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.4/umd/popper.min.js"></script>
    <!-- Bootstrap core JavaScript -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <!-- MDB core JavaScript -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/js/mdb.min.js"></script>
    <!-- Bootstrap core CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css" rel="stylesheet">
    <!-- Material Design Bootstrap -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/css/mdb.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-size: 20px;
            font-family: 'Work Sans', sans-serif;
            color: #333;
            font-weight: 300;
            text-align: center;
        }
        
        input.largerCheckbox {
            width: 15px;
            height: 15px;
        }
        
        h1 {
            font-weight: 300;
            margin: 0px;
            padding: 10px;
            font-size: 20px;
            background-color: #444;
            color: #fff;
        }
        
        label {
            border: 1px solid #84c5fe;
            width: 30%;
            border-radius: 5px;
            padding: 8px 15px;
            font-size: 17px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: space-between;
            display: block;
            margin-bottom: 15px;
            font-size: 14px;
            cursor: pointer
        }
        
        .question {
            background-color: #555;
            font-weight: bold;
            margin-left: 25%;
            width: 50%;
            margin-top: 0px;
            font-size: 30px;
            margin-bottom: 10px;
        }
        
        .answers {
            background-color: #555;
            padding-left: 25%;
            padding-bottom: 30px;
            width: 100%;
            margin-bottom: 20px;
            text-align: left;
            display: inline-block;
        }
        
        .answers label {
            background-color: #555;
            display: block;
            margin-bottom: 5px;
            line-height: normal;
        }
        
        button {
            font-family: 'Work Sans', sans-serif;
            font-size: 18px;
            background-color: rgba(144, 24, 138, 1);
            color: #fff;
            border: 0px;
            border-radius: 2px;
            padding-left: 10px;
            padding-right: 10px;
            cursor: pointer;
            margin-bottom: 20px;
            z-index: 1;
        }
        
        button:hover {
            background-color: #b852ec;
            border: 1px solid #b852ec;
        }
        
        header {
            width: 50%;
            margin-left: 25%;
            font-weight: bold;
            background-color: #90188a;
            color: #fff3e1;
        }
        
        .slide {
            background-color: #555;
            position: absolute;
            left: 0px;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.5s;
        }
        
        .active-slide {
            opacity: 1;
            z-index: 1;
        }
        
        .quiz-container {
            background-color: #555;
            color: #ddd;
            border-radius: 10px;
            padding: 20px;
            position: relative;
            height: 200px;
            width: 100%;
        }
        
        label {
            background-color: #b852ec;
            color: white;
        }
        
        div {
            background-color: #333;
        }
        
        #cont {
            position: relative;
            height: 750px;
            margin-top: 0;
            background-color: #333;
        }
        
        #results {
            padding: 25px 25px;
            height: 100%;
        }
        /* @media only screen and (max-width: 600px) {
            #previous,
            #next,
            #submit {
                margin-top: 400px;
                z-index: 3;
            }
            #Btn {
                margin-top: 50%;
            }
        } */
        
        span.cls_002 {
            font-family: Arial, serif;
            font-size: 10.1px;
            color: rgb(0, 0, 0);
            font-weight: bold;
            font-style: normal;
            text-decoration: none
        }
        
        div.cls_002 {
            font-family: Arial, serif;
            font-size: 10.1px;
            color: rgb(0, 0, 0);
            font-weight: bold;
            font-style: normal;
            text-decoration: none
        }
        
        span.cls_003 {
            font-family: Arial, serif;
            font-size: 10.1px;
            color: rgb(0, 0, 0);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }
        
        div.cls_003 {
            font-family: Arial, serif;
            font-size: 10.1px;
            color: rgb(0, 0, 0);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }
        
        span.cls_004 {
            font-family: Arial, serif;
            font-size: 11.1px;
            color: rgb(0, 0, 0);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }
        
        div.cls_004 {
            font-family: Arial, serif;
            font-size: 11.1px;
            color: rgb(0, 0, 0);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }
        
        span.cls_005 {
            font-family: Arial, serif;
            font-size: 9.1px;
            color: rgb(0, 0, 0);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }
        
        div.cls_005 {
            font-family: Arial, serif;
            font-size: 9.1px;
            color: rgb(0, 0, 0);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }
        
        span.cls_006 {
            font-family: Arial, serif;
            font-size: 9.1px;
            color: rgb(64, 63, 64);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }
        
        div.cls_006 {
            font-family: Arial, serif;
            font-size: 9.1px;
            color: rgb(64, 63, 64);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }
        
        span.cls_007 {
            font-family: Arial, serif;
            font-size: 9.1px;
            color: rgb(157, 32, 106);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }
        
        div.cls_007 {
            font-family: Arial, serif;
            font-size: 9.1px;
            color: rgb(157, 32, 106);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }
        
        span.cls_012 {
            font-family: Arial, serif;
            font-size: 9.1px;
            color: rgb(28, 68, 133);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }
        
        div.cls_012 {
            font-family: Arial, serif;
            font-size: 9.1px;
            color: rgb(28, 68, 133);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }
        
        span.cls_011 {
            font-family: Arial, serif;
            font-size: 13.6px;
            color: rgb(64, 63, 64);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }
        
        div.cls_011 {
            font-family: Arial, serif;
            font-size: 13.6px;
            color: rgb(64, 63, 64);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }
        
        span.cls_014 {
            font-family: Arial, serif;
            font-size: 9.1px;
            color: rgb(51, 12, 78);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }
        
        div.cls_014 {
            font-family: Arial, serif;
            font-size: 9.1px;
            color: rgb(51, 12, 78);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }
        
        #Btn {
            z-index: 2;
            width: 100%;
            position: fixed;
            margin-bottom: 20px;
            bottom: 0;
        }
    </style>
</head>

<body>
    <div id="cont">
        <div class="quiz-container">
            <header></header>
            <div id="5op" style="display: none; color: red;">please select 5 options.</div>
            <div id="quiz"></div>
            <div id="results">
                <footer>we are here</footer>
            </div>
        </div>
        <div id="Btn">
            <button id="next">Next Question</button>
            <button id="previous">Previous Question</button>
            <button id="submit">Submit
        Quiz</button>
        </div>
    </div>
    <script>
        (function() {
            // Functions
            function buildQuiz() {
                // variable to store the HTML output
                resultsContainer.style.display = 'none';
                const output = [];

                // for each question...
                myQuestions.forEach(
                    (currentQuestion, questionNumber) => {

                        // variable to store the list of possible answers
                        const answers = [];
                        if (currentQuestion.type == 'multi') {
                            // and for each available answer...
                            for (letter in currentQuestion.answers) {

                                // ...add an HTML radio button
                                answers.push(
                                    `<label style=" margin-top:20px;">
                                <input class="option form-check-input largerCheckbox" type="checkbox" name="question${questionNumber}" value="${letter}">
                                ${currentQuestion.answers[letter]}
                                </label>`
                                );
                            }
                        } else {
                            for (letter in currentQuestion.answers) {

                                // ...add an HTML radio button
                                answers.push(
                                    `<label style="height: 100%; margin-top:20px;" onclick ="showSlide(currentSlide + 1)">
              <input type="radio" name="question${questionNumber}" value="${letter}">
              ${letter} :
              ${currentQuestion.answers[letter]}
            </label>`
                                );
                            }
                        }

                        // add this question and its answers to the output
                        output.push(
                            `<div class="slide">
            <div class="question"> ${currentQuestion.question} </div>
            <div class="answers"> ${answers.join("")} </div>
          </div>`
                        );
                    }
                );

                // finally combine our output list into one string of HTML and put it on the page
                quizContainer.innerHTML = output.join('');
            }

            function showResults() {

                // gather answer containers from our quiz
                const answerContainers = quizContainer.querySelectorAll('.answers');
                const col = [];
                // keep track of user's answers
                // for each question...
                myQuestions.forEach((currentQuestion, questionNumber) => {

                    // find selected answer
                    const answerContainer = answerContainers[questionNumber];
                    const selector = `input[name=question${questionNumber}]:checked`;
                    // const userAnswer = (answerContainer.querySelector(selector) || {}).value;
                    // console.log(answerContainer.querySelectorAll(selector));
                    // col[currentQuestion.Col] = parseInt(userAnswer);
                    const userAnswers = answerContainer.querySelectorAll(selector);
                    let temp = [];
                    userAnswers.forEach((answer, num) => {
                        temp[num] = answer.value;
                    });
                    col[currentQuestion.Col - 1] = temp;
                });

                document.getElementById('quiz').style.display = 'none';
                document.getElementById('Btn').style.display = 'none';
                resultsContainer.style.display = 'block';
                document.getElementById('cont').height = 0;
                document.getElementById("results").innerHTML = col;
                console.log(col);
            }

            function showSlide(n) {
                slides[currentSlide].classList.remove('active-slide');
                slides[n].classList.add('active-slide');
                currentSlide = n;
                if (currentSlide === 0) {
                    previousButton.style.display = 'none';
                } else {
                    previousButton.style.display = 'inline-block';
                }
                if (currentSlide === slides.length - 1) {
                    submitButton.style.display = 'inline-block';
                } else {
                    submitButton.style.display = 'none';
                }
            }

            function showNextSlide() {
                if (myQuestions[currentSlide].type == 'multi') {
                    const answerContainers = quizContainer.querySelectorAll('.answers');
                    const answerContainer = answerContainers[currentSlide];
                    const selector = `input[name=question${currentSlide}]:checked`;
                    const userAnswers = answerContainer.querySelectorAll(selector);
                    if (userAnswers.length == 5) {
                        showSlide(currentSlide + 1);
                    } else {
                        document.getElementById('5op').style.display = 'block';
                        setTimeout(function() {
                            document.getElementById('5op').style.display = 'none';
                        }, 3000);
                    }
                } else {
                    showSlide(currentSlide + 1);
                }
            }

            function showPreviousSlide() {
                showSlide(currentSlide - 1);
            }

            // Variables
            const quizContainer = document.getElementById('quiz');
            const resultsContainer = document.getElementById('results');
            const submitButton = document.getElementById('submit');
            const myQuestions = [{
                question: "My purchases make me feel better about myself",
                answers: {
                    1: "Disagree",
                    2: "Disagree",
                    3: "Disagree",
                    4: "Disagree",
                    5: "Disagree"
                },
                type: 'multi',
                Col: 1
            }, {
                question: "At my most extreme, I spend money impulsively",
                answers: {
                    1: "Strongly",
                    2: "Strongly",
                    3: "NStrongly",
                    4: "Strongly",
                    5: "Strongly"
                },
                Col: 2
            }, {
                question: "I am typically decisive regarding money and its management",
                answers: {
                    1: "Neutral",
                    2: "Neutral",
                    3: "Neutral",
                    4: "Neutral",
                    5: "Neutral"
                },
                type: 'multi',
                Col: 3
            }, {
                question: "I believe I'll be happy when I have more money (even though what I have now is more than I've had before)",
                answers: {
                    1: "Agree",
                    2: "Agree",
                    3: "Agree",
                    4: "Agree",
                    5: "Agree"
                },
                Col: 4
            }, {
                question: "I fear losing control of or power over my money",
                answers: {
                    1: "Strongly Disagree",
                    2: "Disagree",
                    3: "Neutral",
                    4: "Agree",
                    5: "Strongly Agree"
                },
                Col: 5
            }, ];

            // Kick things off
            buildQuiz();

            // Pagination
            const nextButton = document.getElementById("next");
            const previousButton = document.getElementById("previous");
            const slides = document.querySelectorAll(".slide");
            let currentSlide = 0;

            // Show the first slide
            showSlide(currentSlide);

            // Event listeners
            const option = document.getElementsByClassName("option");
            /* for (var i = 0; i < option.length; i++) {
                option[i].addEventListener('change', function() {
                    if (currentSlide == myQuestions.length - 1) {
                        showResults();
                    } else {
                        showNextSlide();
                    }
                });
            } */
            nextButton.addEventListener('click', showNextSlide);
            submitButton.addEventListener('click', showResults);
            previousButton.addEventListener("click", showPreviousSlide);
        })();
    </script>
</body>